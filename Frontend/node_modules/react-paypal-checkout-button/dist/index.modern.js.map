{"version":3,"file":"index.modern.js","sources":["../src/hooks/use-paypal-script.hook.ts","../src/hooks/use-paypal-checkout.hook.ts","../src/components/spinner.component.tsx","../src/components/error-container.component.tsx","../src/components/paypal-checkout/paypal-checkout.component.tsx"],"sourcesContent":["import { useEffect, useState } from 'react'\n// eslint-disable-next-line no-unused-vars\nimport { ButtonState, UsePayPalScriptOptions } from '../types'\n\nconst usePayPalScript = ({\n  clientId,\n  currency,\n  onError,\n  intent,\n  paypalElement\n}: UsePayPalScriptOptions) => {\n  const INTENT = intent ? `&intent=${intent?.toLocaleLowerCase()}` : ''\n\n  const [buttonState, setButtonState] = useState<ButtonState>({\n    isLoadingButton: false,\n    buttonLoaded: false,\n    errorMessage: ''\n  })\n\n  const { isLoadingButton, buttonLoaded, errorMessage } = buttonState\n\n  useEffect(() => {\n    if (errorMessage || !paypalElement) return\n\n    if (!clientId) {\n      console.log({ buttonState })\n\n      const errorMessage = 'Client Id is required to load PayPal Smart Button'\n\n      onError && onError(new Error(errorMessage))\n\n      console.error(errorMessage)\n\n      return setButtonState({\n        isLoadingButton: false,\n        buttonLoaded: false,\n        errorMessage\n      })\n    }\n\n    if (!isLoadingButton && !buttonLoaded && !errorMessage) {\n      setButtonState((prev) => ({ ...prev, isLoadingButton: true }))\n\n      const script = document.createElement('script')\n      script.src = `https://www.paypal.com/sdk/js?client-id=${clientId}&currency=${currency}${INTENT}`\n\n      script.addEventListener('load', () =>\n        setButtonState((prev) => ({\n          ...prev,\n          isLoadingButton: false,\n          buttonLoaded: true\n        }))\n      )\n\n      document.body.appendChild(script)\n\n      script.addEventListener('error', (error) => {\n        console.error(error)\n\n        onError && onError(error)\n\n        return setButtonState({\n          isLoadingButton: false,\n          buttonLoaded: false,\n          errorMessage: `An error occured while isLoadingButton paypal smart buttons`\n        })\n      })\n    }\n  }, [buttonState, paypalElement])\n\n  return {\n    buttonState,\n    setButtonState\n  }\n}\n\nexport default usePayPalScript\n","/* eslint-disable no-unused-vars */\n/* eslint-disable camelcase */\nimport { useEffect, useState } from 'react'\nimport {\n  OnApproveDataTypes,\n  UsePayPalCheckoutOptions,\n  UsePayPalCheckoutValues\n} from '../types'\nimport usePayPalScript from './use-paypal-script.hook'\n\nconst usePayPalCheckout = (\n  options: UsePayPalCheckoutOptions\n): UsePayPalCheckoutValues => {\n  const GlobalWindow: any = window\n\n  const [paypalElement, setPayPalElement] = useState()\n\n  const {\n    clientId,\n    intent = 'CAPTURE',\n    amount,\n    description = 'payment',\n    currency = 'USD',\n    buttonStyles,\n    onSuccess,\n    onError\n  } = options\n\n  const { buttonState, setButtonState } = usePayPalScript({\n    clientId,\n    currency,\n    onError,\n    intent,\n    paypalElement\n  })\n\n  const { isLoadingButton, buttonLoaded, errorMessage } = buttonState\n\n  const paypalRef = (node: any) => setPayPalElement(node)\n\n  const onRetry = () => {\n    setButtonState({\n      buttonLoaded: false,\n      isLoadingButton: false,\n      errorMessage: ''\n    })\n  }\n\n  const createOrder = (_data: any, actions: any) => {\n    const purchase_units = [\n      {\n        description: description,\n        amount: {\n          currency,\n          value: amount\n        }\n      }\n    ]\n\n    // console.log({ data, actions })\n\n    return actions.order.create({\n      intent,\n      purchase_units\n    })\n  }\n\n  const errorHandler = (error: any) => {\n    console.error({ error })\n\n    onError && onError(error)\n  }\n\n  const onApprove = async (data: OnApproveDataTypes, actions: any) => {\n    const getOrder = () => {\n      if (intent === 'AUTHORIZE') return actions.order.authorize()\n\n      return actions.order.capture()\n    }\n\n    const order = await getOrder()\n\n    onSuccess && onSuccess(data, order)\n  }\n\n  useEffect(() => {\n    if (buttonLoaded && !isLoadingButton && !errorMessage && paypalElement) {\n      if (!GlobalWindow?.paypal) {\n        const errorMessage =\n          'PayPal button was not buttonLoaded successfully...'\n\n        onError && onError(new Error(errorMessage))\n\n        return setButtonState({\n          isLoadingButton: false,\n          buttonLoaded: false,\n          errorMessage\n        })\n      }\n\n      setTimeout(() => {\n        GlobalWindow.paypal\n          .Buttons({\n            ...(buttonStyles && { style: buttonStyles }),\n            createOrder,\n            onApprove,\n            onError: errorHandler\n          })\n          .render(paypalElement)\n      })\n    }\n  }, [buttonState])\n\n  return {\n    ...buttonState,\n    onRetry,\n    paypalRef\n  }\n}\n\nexport default usePayPalCheckout\n","/* eslint-disable no-unused-vars */\nimport React from 'react'\nimport { SpinnerProps } from '../types'\nimport styles from '../styles.module.css'\n\nconst Spinner: React.FC<SpinnerProps> = ({ isLoading }) =>\n  isLoading ? <div className={styles.spinner} /> : null\n\nexport default Spinner\n","/* eslint-disable no-unused-vars */\nimport React from 'react'\nimport { ErrorContainerProps } from '../types'\nimport styles from '../styles.module.css'\n\nconst ErrorContainer: React.FC<ErrorContainerProps> = ({\n  errorMessage,\n  onRetry\n}) => (\n  <div className={styles['error-container']}>\n    <p className={styles['error-message']}>{errorMessage}</p>\n\n    <button onClick={onRetry && onRetry} className={styles['retry-button']}>\n      Try again\n    </button>\n  </div>\n)\n\nexport default ErrorContainer\n","/* eslint-disable camelcase */\n/* eslint-disable no-unused-vars */\nimport React from 'react'\nimport { PayPalCheckoutProps } from '../../types'\n\nimport styles from '../../styles.module.css'\nimport usePayPalCheckout from '../../hooks/use-paypal-checkout.hook'\nimport Spinner from '../spinner.component'\nimport ErrorContainer from '../error-container.component'\n\nconst PayPalCheckout: React.FC<PayPalCheckoutProps> = (props) => {\n  const {\n    isLoadingButton,\n    buttonLoaded,\n    errorMessage,\n    onRetry,\n\n    paypalRef\n  } = usePayPalCheckout({\n    ...props\n  })\n\n  const renderReactPayPalStates = () => {\n    if (buttonLoaded) return\n\n    if (isLoadingButton) return <Spinner isLoading={isLoadingButton} />\n\n    if (errorMessage)\n      return <ErrorContainer errorMessage={errorMessage} onRetry={onRetry} />\n\n    return null\n  }\n\n  return (\n    <div className={styles.container}>\n      <div ref={paypalRef} />\n\n      {renderReactPayPalStates()}\n    </div>\n  )\n}\n\nexport default React.memo(PayPalCheckout)\n"],"names":["usePayPalScript","clientId","currency","onError","intent","paypalElement","INTENT","toLocaleLowerCase","buttonState","setButtonState","useState","isLoadingButton","buttonLoaded","errorMessage","useEffect","console","log","Error","error","prev","script","document","createElement","src","addEventListener","body","appendChild","usePayPalCheckout","options","GlobalWindow","window","setPayPalElement","amount","description","buttonStyles","onSuccess","paypalRef","node","onRetry","createOrder","_data","actions","purchase_units","value","order","create","errorHandler","onApprove","data","getOrder","authorize","capture","paypal","setTimeout","Buttons","style","render","Spinner","isLoading","React","className","styles","spinner","ErrorContainer","onClick","PayPalCheckout","props","renderReactPayPalStates","container","ref","memo"],"mappings":"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"}